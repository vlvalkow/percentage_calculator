---
/* No framework needed */
---

<!-- Q3: What percent is ___ from ___ ? -->
<div class="card shadow-sm">
  <div class="card-body p-4 py-5">
    <div class="d-flex flex-column row-gap-3">
      <h2>What % is</h2>
      <form id="percentIsForm" class="fs-5" novalidate>
        <div class="d-flex flex-column row-gap-3">
          <div class="d-flex flex-wrap row-gap-2">
            <div
              class="d-flex align-items-center flex-grow-1"
            >
              <input
                id="percent_is_form_x_value"
                type="number"
                inputmode="decimal"
                name="percent_is_form_x_value"
                step="any"
                placeholder="X"
                required
                class="form-control form-control-lg"
                aria-label="X value"
              />
              <span class="fs-5 text-end text-sm-center min-w-2 min-w-lg-auto mx-0 mx-md-3">of</span>
            </div>
            <div
              class="d-flex align-items-center flex-grow-1"
            >
              <input
                id="percent_is_form_y_value"
                type="number"
                inputmode="decimal"
                name="percent_is_form_y_value"
                step="any"
                placeholder="Y"
                required
                class="form-control form-control-lg"
                aria-label="Y value"
              />
              <span class="fs-5 text-end min-w-2 min-w-lg-auto ms-0 ms-lg-3">?</span>
            </div>
          </div>
          <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary btn-lg">Calculate</button>
            <button type="reset" class="btn btn-outline-secondary btn-lg">Reset</button
            >
          </div>
        </div>
      </form>

      <div class="alert alert-info mb-0 fs-5" role="status" aria-live="polite">
        <span id="percentIsResult" class="fw-semibold"
          >Enter values and click Calculate.</span
        >
      </div>

      <p class="text-muted small mt-2 mb-0">
        Formula: <span class="font-monospace">X / Y Ã— 100</span>
      </p>
    </div>
  </div>
</div>

<script>
  const format = (n, maxFractionDigits = 10) => {
    if (!Number.isFinite(n)) return "";
    return n.toLocaleString(undefined, {
      maximumFractionDigits: maxFractionDigits,
    });
  };

  // 3) What percent is X from Y
  const percentIsForm = document.querySelector("#percentIsForm");
  const percentIsResult = document.querySelector("#percentIsResult");

  if (percentIsForm && percentIsResult) {
    percentIsForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const data = new FormData(percentIsForm);
      const part = Number(data.get("percent_is_form_x_value")); // X
      const whole = Number(data.get("percent_is_form_y_value")); // Y

      if (!Number.isFinite(part) || !Number.isFinite(whole)) {
        percentIsResult.textContent = "Please enter valid numbers.";
        return;
      }

      if (whole === 0) {
        percentIsResult.textContent =
          "This percentage is undefined when the second number is 0.";
        return;
      }

      const pct = (part / whole) * 100;
      percentIsResult.textContent = `${format(part)} of ${format(whole)} is ${format(pct, 6)}%`;
    });

    percentIsForm.addEventListener("reset", () => {
      requestAnimationFrame(() => {
        percentIsResult.textContent = "Enter values and click Calculate.";
      });
    });
  }
</script>
