---
/* No framework needed */
---

<!-- Q1: What is __ % of __ ? -->
<div class="d-grid row-gap-3">
  <h2 class="fs-5 mb-0">1) Percent of a number</h2>

  <form id="percent_of_form" novalidate>
    <div class="d-flex gap-3 flex-column fs-5">
      <div class="d-flex gap-2 flex-wrap">
        <div class="d-flex align-items-center gap-4 gap-lg-3 flex-grow-1 flex-md-grow-0">
          <label
            for="percent_of_form_x_value"
            class="text-nowrap col-2 col-lg-aut">What is</label
          >
          <input
            id="percent_of_form_x_value"
            type="number"
            name="percent_of_form_x_value"
            step="any"
            min="0"
            placeholder="%"
            required
            class="form-control form-control-lg"
            aria-label="Percent"
          />
          <span>%</span>
        </div>
        <div class="d-flex align-items-center gap-4 gap-lg-3 flex-grow-1 flex-md-grow-0">
          <label
            for="percent_of_form_y_value"
            class="text-nowrap col-2 col-lg-auto">from the</label
          >
          <input
            id="percent_of_form_y_value"
            type="number"
            name="percent_of_form_y_value"
            step="any"
            placeholder="number"
            required
            class="form-control form-control-lg"
            aria-label="Number"
          />
          <span>?</span>
        </div>
      </div>
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary btn-lg">Calculate</button>
        <button type="reset" class="btn btn-outline-secondary btn-lg">Reset</button>
      </div>
    </div>
  </form>

  <div class="alert alert-info mb-0 fs-5" role="status" aria-live="polite">
    <span id="percentOfResult" class="fw-semibold"
      >Enter values and click Calculate.</span
    >
  </div>

  <p class="text-muted mb-0">
    Formula:
    <span class="font-monospace">(percent รท 100) ร number</span>
  </p>
</div>

<script>
  const format = (n, maxFractionDigits = 10) => {
    if (!Number.isFinite(n)) return "";
    return n.toLocaleString(undefined, {
      maximumFractionDigits: maxFractionDigits,
    });
  };

  // 1) Percent of
  const percentOfForm = document.querySelector("#percent_of_form");
  const percentOfResult = document.querySelector("#percentOfResult");

  if (percentOfForm && percentOfResult) {
    percentOfForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const data = new FormData(percentOfForm);
      const pct = Number(data.get("percent_of_form_x_value"));
      const num = Number(data.get("percent_of_form_y_value"));

      if (!Number.isFinite(pct) || !Number.isFinite(num)) {
        percentOfResult.textContent = "Please enter valid numbers.";
        return;
      }

      const answer = (pct / 100) * num;
      percentOfResult.textContent = `${format(pct)}% of ${format(num)} = ${format(answer)}`;
    });

    percentOfForm.addEventListener("reset", () => {
      requestAnimationFrame(() => {
        percentOfResult.textContent = "Enter values and click Calculate.";
      });
    });
  }
</script>
